/**
 * Fish Diary 全局样式
 * 设计风格: shadcn/ui - 黑白灰极简
 * 优化版本: v1.1 - 增强移动端体验
 */

/* ==================== 设计系统变量 ==================== */
page {
  /* 中性色 */
  --background: #f4f4f5;
  --foreground: #09090b;
  --card: #ffffff;
  --card-foreground: #09090b;
  --popover: #ffffff;
  --popover-foreground: #09090b;
  --primary: #18181b;
  --primary-foreground: #fafafa;
  --secondary: #f4f4f5;
  --secondary-foreground: #18181b;
  --muted: #f4f4f5;
  --muted-foreground: #71717a;
  --accent: #f4f4f5;
  --accent-foreground: #18181b;
  --destructive: #ef4444;
  --destructive-foreground: #fafafa;
  --border: #e4e4e7;
  --input: #e4e4e7;
  --ring: #18181b;

  /* 语义色 - Shadcn 标准 */
  --success: #22c55e;
  --success-foreground: #166534;
  --warning: #f59e0b;
  --warning-foreground: #92400e;
  --danger: #ef4444;
  --danger-foreground: #991b1b;

  /* 圆角系统 */
  --radius-sm: 8rpx;
  --radius: 12rpx;
  --radius-md: 16rpx;
  --radius-lg: 24rpx;
  --radius-full: 9999rpx;

  /* 间距系统 (4px 基准) */
  --spacing-xs: 8rpx;    /* 4px */
  --spacing-sm: 16rpx;   /* 8px */
  --spacing-md: 24rpx;   /* 12px */
  --spacing-lg: 32rpx;   /* 16px */
  --spacing-xl: 48rpx;   /* 24px */
  --spacing-2xl: 64rpx;  /* 32px */

  /* 字体系统 */
  --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* 字号层级 (移动端优化) */
  --text-xs: 22rpx;      /* 11px - 辅助信息 */
  --text-sm: 24rpx;      /* 12px - 次要信息 */
  --text-base: 28rpx;    /* 14px - 正文 */
  --text-lg: 32rpx;      /* 16px - 小标题 */
  --text-xl: 36rpx;      /* 18px - 标题 */
  --text-2xl: 44rpx;     /* 22px - 大标题 */
  --text-3xl: 56rpx;     /* 28px - 特大标题 */

  /* 安全区域 */
  --safe-area-top: env(safe-area-inset-top);
  --safe-area-bottom: env(safe-area-inset-bottom);

  /* 导航栏高度 */
  --nav-bar-height: 88px;
  --status-bar-height: 47px;
  --title-bar-height: 40px;

  /* 页面基础样式 */
  background-color: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  font-size: var(--text-base);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* ==================== 按钮 ==================== */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 var(--spacing-lg);
  height: 80rpx;
  font-size: 28rpx;
  font-weight: 500;
  border-radius: var(--radius);
  border: none;
  transition: opacity 0.2s, background-color 0.2s;
}

.btn::after {
  border: none;
}

.btn:active {
  opacity: 0.9;
}

.btn--primary {
  background-color: var(--primary);
  color: var(--primary-foreground);
}

.btn--secondary {
  background-color: var(--secondary);
  color: var(--secondary-foreground);
}

.btn--outline {
  background-color: transparent;
  border: 2rpx solid var(--border);
  color: var(--foreground);
}

.btn--outline:active {
  background-color: var(--accent);
}

.btn--ghost {
  background-color: transparent;
  color: var(--foreground);
}

.btn--ghost:active {
  background-color: var(--accent);
}

.btn--destructive {
  background-color: var(--destructive);
  color: var(--destructive-foreground);
}

.btn--sm {
  height: 64rpx;
  padding: 0 var(--spacing-md);
  font-size: 24rpx;
}

.btn--lg {
  height: 96rpx;
  padding: 0 var(--spacing-xl);
  font-size: 32rpx;
}

.btn--block {
  display: flex;
  width: 100%;
}

/* ==================== 卡片 ==================== */
.card {
  background-color: var(--card);
  border: 2rpx solid var(--border);
  border-radius: var(--radius);
}

.card__header {
  padding: var(--spacing-lg);
  border-bottom: 2rpx solid var(--border);
}

.card__title {
  font-size: 32rpx;
  font-weight: 600;
  color: var(--card-foreground);
}

.card__description {
  font-size: 24rpx;
  color: var(--muted-foreground);
  margin-top: var(--spacing-xs);
}

.card__body {
  padding: var(--spacing-lg);
}

.card__footer {
  padding: var(--spacing-lg);
  border-top: 2rpx solid var(--border);
}

/* ==================== 输入框 ==================== */
.input {
  width: 100%;
  height: 88rpx;
  padding: 0 var(--spacing-lg);
  background-color: var(--card);
  border: 1rpx solid var(--input);
  border-radius: var(--radius);
  font-size: var(--text-base);
  color: var(--foreground);
  box-sizing: border-box;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.input:focus {
  border-color: var(--ring);
  box-shadow: 0 0 0 2rpx rgba(24, 24, 27, 0.08);
  outline: none;
}

.input::placeholder {
  color: var(--muted-foreground);
}

/* 输入框尺寸变体 */
.input--sm {
  height: 72rpx;
  font-size: var(--text-sm);
}

.input--lg {
  height: 96rpx;
  font-size: var(--text-lg);
}

/* ==================== 文字样式 ==================== */
.text-primary { color: var(--primary); }
.text-muted { color: var(--muted-foreground); }
.text-success { color: var(--success); }
.text-warning { color: var(--warning); }
.text-danger { color: var(--danger); }

.text-xs { font-size: var(--text-xs); }
.text-sm { font-size: var(--text-sm); }
.text-base { font-size: var(--text-base); }
.text-lg { font-size: var(--text-lg); }
.text-xl { font-size: var(--text-xl); }
.text-2xl { font-size: var(--text-2xl); }
.text-3xl { font-size: var(--text-3xl); }

.font-normal { font-weight: 400; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }

/* 数字/等宽字体 - 用于价格、统计数字等 */
.font-mono {
  font-family: var(--font-mono);
  font-variant-numeric: tabular-nums;
}

/* 数字专用样式 */
.number {
  font-family: var(--font-mono);
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.02em;
}

.number-lg {
  font-family: var(--font-mono);
  font-size: var(--text-xl);
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.02em;
}

.number-xl {
  font-family: var(--font-mono);
  font-size: var(--text-2xl);
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.02em;
}

/* 价格样式 */
.price {
  font-family: var(--font-mono);
  font-variant-numeric: tabular-nums;
}

.price-lg {
  font-family: var(--font-mono);
  font-size: var(--text-lg);
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

/* ==================== 统计数值 ==================== */
/* 大数值展示 - 用于首页统计、数据看板 */
.stat-number {
  font-family: var(--font-mono);
  font-size: var(--text-2xl);
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.03em;
  line-height: 1.1;
  color: var(--foreground);
}

.stat-number--sm {
  font-size: var(--text-xl);
  font-weight: 600;
}

.stat-number--lg {
  font-size: var(--text-3xl);
  font-weight: 700;
}

/* 统计标签 */
.stat-label {
  font-size: var(--text-sm);
  color: var(--muted-foreground);
  letter-spacing: 0.01em;
}

/* 单位后缀 */
.stat-unit {
  font-family: var(--font-sans);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--muted-foreground);
  margin-left: 4rpx;
}

/* 文字截断 */
.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ==================== 布局工具 ==================== */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-1 { flex: 1; }
.items-center { align-items: center; }
.items-start { align-items: flex-start; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-sm { gap: var(--spacing-sm); }
.gap-md { gap: var(--spacing-md); }
.gap-lg { gap: var(--spacing-lg); }

/* 间距 */
.p-sm { padding: var(--spacing-sm); }
.p-md { padding: var(--spacing-md); }
.p-lg { padding: var(--spacing-lg); }
.px-md { padding-left: var(--spacing-md); padding-right: var(--spacing-md); }
.py-md { padding-top: var(--spacing-md); padding-bottom: var(--spacing-md); }
.mt-sm { margin-top: var(--spacing-sm); }
.mt-md { margin-top: var(--spacing-md); }
.mt-lg { margin-top: var(--spacing-lg); }
.mb-sm { margin-bottom: var(--spacing-sm); }
.mb-md { margin-bottom: var(--spacing-md); }
.mb-lg { margin-bottom: var(--spacing-lg); }

/* ==================== 徽章 ==================== */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 4rpx 16rpx;
  font-size: 22rpx;
  font-weight: 500;
  border-radius: var(--radius);
  background-color: var(--secondary);
  color: var(--secondary-foreground);
}

.badge--success {
  background-color: #dcfce7;
  color: #166534;
}

.badge--warning {
  background-color: #fef3c7;
  color: #92400e;
}

.badge--danger {
  background-color: #fee2e2;
  color: #991b1b;
}

/* ==================== 分割线 ==================== */
.separator {
  height: 2rpx;
  background-color: var(--border);
}

/* ==================== 头像 ==================== */
.avatar {
  border-radius: 50%;
  overflow: hidden;
  background-color: var(--muted);
}

.avatar--sm { width: 64rpx; height: 64rpx; }
.avatar--md { width: 80rpx; height: 80rpx; }
.avatar--lg { width: 120rpx; height: 120rpx; }

/* ==================== 空状态 ==================== */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-xl) var(--spacing-lg);
}

.empty-state__icon {
  font-size: 80rpx;
  margin-bottom: var(--spacing-lg);
  opacity: 0.5;
}

.empty-state__title {
  font-size: 32rpx;
  font-weight: 600;
  color: var(--foreground);
  margin-bottom: var(--spacing-sm);
}

.empty-state__desc {
  font-size: 26rpx;
  color: var(--muted-foreground);
  text-align: center;
  margin-bottom: var(--spacing-lg);
}

/* ==================== 加载 ==================== */
.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-xl);
}

.loading__spinner {
  width: 40rpx;
  height: 40rpx;
  border: 4rpx solid var(--border);
  border-top-color: var(--foreground);
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ==================== 安全区域 ==================== */
.safe-area-bottom {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

/* ==================== 表单字段 (Shadcn Field Pattern) ==================== */
/* 表单组 */
.field {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  width: 100%;
}

.field--horizontal {
  flex-direction: row;
  align-items: center;
  gap: var(--spacing-md);
}

/* 表单标签 */
.field__label {
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--foreground);
  letter-spacing: -0.01em;
}

.field__label--required::after {
  content: '*';
  color: var(--destructive);
  margin-left: 4rpx;
}

/* 表单描述 */
.field__description {
  font-size: var(--text-xs);
  color: var(--muted-foreground);
  line-height: 1.4;
}

/* 表单错误提示 */
.field__error {
  font-size: var(--text-xs);
  color: var(--destructive);
  line-height: 1.4;
}

/* ==================== 弹窗规范 ==================== */
/* 底部弹窗容器 */
.sheet {
  background: var(--card);
  border-radius: 24rpx 24rpx 0 0;
  overflow: hidden;
}

/* 弹窗头部 - 标准三栏布局 */
.sheet__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-lg);
  border-bottom: 1rpx solid var(--border);
  min-height: 100rpx;
}

.sheet__title {
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--foreground);
  letter-spacing: -0.01em;
}

.sheet__close {
  width: 56rpx;
  height: 56rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40rpx;
  color: var(--muted-foreground);
  border-radius: var(--radius-full);
  transition: background-color 0.15s;
}

.sheet__close:active {
  background: var(--muted);
}

/* 弹窗内容区 */
.sheet__body {
  padding: var(--spacing-lg);
  max-height: 70vh;
  overflow-y: auto;
}

/* 弹窗底部操作区 */
.sheet__footer {
  padding: var(--spacing-lg);
  padding-bottom: calc(var(--spacing-lg) + env(safe-area-inset-bottom));
  border-top: 1rpx solid var(--border);
  display: flex;
  gap: var(--spacing-md);
}

.sheet__footer--vertical {
  flex-direction: column;
}

/* ==================== 列表项规范 ==================== */
/* 标准列表项 */
.list-item {
  display: flex;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--card);
  transition: background-color 0.15s;
}

.list-item:active {
  background: var(--muted);
}

.list-item__icon {
  width: 80rpx;
  height: 80rpx;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36rpx;
  flex-shrink: 0;
  margin-right: var(--spacing-md);
}

.list-item__content {
  flex: 1;
  min-width: 0;
}

.list-item__title {
  font-size: var(--text-base);
  font-weight: 500;
  color: var(--foreground);
  line-height: 1.4;
}

.list-item__subtitle {
  font-size: var(--text-sm);
  color: var(--muted-foreground);
  line-height: 1.4;
  margin-top: 4rpx;
}

.list-item__action {
  flex-shrink: 0;
  margin-left: var(--spacing-md);
}

/* ==================== 数据参数网格 ==================== */
/* 参数网格容器 */
.param-grid {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-md);
  padding: var(--spacing-md);
  background: var(--secondary);
  border-radius: var(--radius);
}

/* 参数项 */
.param-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 120rpx;
}

.param-item--third {
  width: calc(33.33% - var(--spacing-md));
}

.param-item--half {
  width: calc(50% - var(--spacing-md) / 2);
}

.param-label {
  font-size: var(--text-xs);
  color: var(--muted-foreground);
  margin-bottom: 4rpx;
}

.param-value {
  font-family: var(--font-mono);
  font-size: var(--text-base);
  font-weight: 600;
  color: var(--foreground);
  font-variant-numeric: tabular-nums;
}

/* ==================== 提示框 ==================== */
/* 信息提示框 */
.alert {
  padding: var(--spacing-md);
  border-radius: var(--radius);
  display: flex;
  gap: var(--spacing-sm);
}

.alert--info {
  background: #eff6ff;
  border: 1rpx solid #bfdbfe;
}

.alert--info .alert__title {
  color: #1e40af;
}

.alert--info .alert__text {
  color: #1e3a8a;
}

.alert--warning {
  background: #fef3c7;
  border: 1rpx solid #fcd34d;
}

.alert--warning .alert__title {
  color: #92400e;
}

.alert--warning .alert__text {
  color: #78350f;
}

.alert--success {
  background: #dcfce7;
  border: 1rpx solid #86efac;
}

.alert--success .alert__title {
  color: #166534;
}

.alert--success .alert__text {
  color: #14532d;
}

.alert__icon {
  font-size: 32rpx;
  flex-shrink: 0;
}

.alert__content {
  flex: 1;
}

.alert__title {
  font-size: var(--text-sm);
  font-weight: 600;
  margin-bottom: 4rpx;
}

.alert__text {
  font-size: var(--text-sm);
  line-height: 1.5;
}
